(this.webpackJsonprw_movies=this.webpackJsonprw_movies||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a(1),n=a.n(i),c=a(8),o=a.n(c),l=a(9),r=a(2),d=a(3),h=a(5),p=a(4),u=(a(15),a(6)),v=a.n(u),b=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).dots="...",s.getClasses=function(e){return v()("page-link",{active:e===s.props.page})},s.setPage=function(e){return function(){return s.props.setPage(e)}},s.pageNumbers=function(){console.log("pagination pageNumbers");var e=s.props,t=e.page,a=e.total_pages,i=[],n=t-1,c=t+1;if(a<c&&(c=a,n=(n=a-2)<1?1:n),n<=1&&(n=1,c=Math.min(3,a)),n<=3)for(var o=1;o<n;o++)i.push(o);else i.push(1,s.dots);for(var l=n;l<=c;l++)i.push(l);if(c>=a-2)for(var r=c+1;r<=a;r++)i.push(r);else i.push(s.dots,a);s.setState({page_numbers:i})},console.log("pagination constructor"),s.state={page_numbers:[]},s}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t,a){var s=this.props.page!==e.page||this.state.page_numbers.length<=1;return console.log("update?",s),s}},{key:"componentDidMount",value:function(){console.log("pagination mount",this.props,this.state),this.pageNumbers()}},{key:"componentDidUpdate",value:function(e,t,a){console.log("pagination DidUpdate"),console.log(t,this.state,e.page!==this.props.page),e.page!==this.props.page&&this.pageNumbers()}},{key:"render",value:function(){var e=this,t=this.props,a=t.page,i=t.total_pages;return console.log("pagination render",this.state.page_numbers),Object(s.jsxs)("div",{children:[Object(s.jsxs)("h4",{children:["Current page: ",a," | "," Total Pages: ",i]}),Object(s.jsx)("nav",{"aria-label":"Page navigation example",children:Object(s.jsxs)("ul",{className:"pagination",children:[Object(s.jsx)("li",{className:v()("page-item",{disabled:a<=1}),children:Object(s.jsx)("span",{className:"page-link","aria-label":"Previous",onClick:this.setPage(a-1),children:Object(s.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),this.state.page_numbers.map((function(t,i){return Object(s.jsx)("li",{className:v()("page-item",{active:a===t},{disabled:t===e.dots}),children:Object(s.jsx)("span",{className:"page-link",onClick:e.setPage(t),children:t})},i)})),Object(s.jsx)("li",{className:"page-item",children:Object(s.jsx)("span",{className:"page-link","aria-label":"Next",onClick:this.setPage(a+1),children:Object(s.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})]})}}]),a}(n.a.Component),m=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(r.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).checkActive=function(t){return v()("nav-link",{active:t===e.props.sort_by})},e.handleClick=function(t){return function(){return e.props.updateSortBy(t)}},e}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t,a){return e.sort_by!==this.props.sort_by}},{key:"render",value:function(){return Object(s.jsxs)("ul",{className:"tabs nav nav-pills",children:[Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)("div",{className:this.checkActive("popularity.desc"),onClick:this.handleClick("popularity.desc"),children:"Popularity desc"})}),Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)("div",{className:this.checkActive("vote_average.desc"),onClick:this.handleClick("vote_average.desc"),children:"Vote average desc"})}),Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)("div",{className:this.checkActive("revenue.desc"),onClick:this.handleClick("revenue.desc"),children:"Revenue desc"})})]})}}]),a}(n.a.Component),j=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).getImage=function(){var e=s.props.movie;return fetch("https://image.tmdb.org/t/p/w500".concat(e.backdrop_path||e.poster_path)).then((function(e){return e.blob()})).then((function(e){s.setState({image:URL.createObjectURL(e),imageLoaded:!0})}))},s.toggleWillWatch=function(e){s.state.willWatch?s.props.removeMovieFromWillWatch(e):s.props.addMovieToWillWatch(e),s.setState({willWatch:!s.state.willWatch})},s.state={willWatch:!1,imageLoaded:!1,image:null},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({image:this.getImage()})}},{key:"render",value:function(){var e=this,t=this.props,a=t.movie,i=t.removeMovie,n=t.addMovieToWillWatch,c=t.removeMovieFromWillWatch;return Object(s.jsxs)("div",{className:"card",children:[this.state.imageLoaded?Object(s.jsx)("img",{className:"card-img-top",src:this.state.image,alt:a.title}):Object(s.jsxs)("p",{children:[Object(s.jsx)("div",{className:"spinner-border",role:"status"}),"Loading preview image..."]}),Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)("h6",{className:"cart-title",children:a.title}),Object(s.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(s.jsxs)("p",{className:"mb-0",children:["Rating: ",a.vote_average]}),this.state.willWatch?Object(s.jsx)("button",{type:"button",className:"btn btn-success",onClick:function(){e.setState({willWatch:!1}),c(a)},children:"Remove Will Watch"}):Object(s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){e.setState({willWatch:!0}),n(a)},children:"Add Will Watch"})]}),Object(s.jsx)("button",{type:"button",className:"btn btn-danger",onClick:i.bind(null,a),children:"Delete"})]})]})}}]),a}(n.a.Component),g=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).getMovies=function(){e.setState({paginationDataLoaded:!1}),fetch("".concat("https://api.themoviedb.org/3","/discover/movie?api_key=").concat("771a8a6812ee818e51df548782eae9b8")+"&sort_by=".concat(e.state.sort_by,"&page=").concat(e.state.page)).then((function(e){return e.json()})).then((function(t){e.setState({movies:t.results,page:e.state.page,total_pages:t.total_pages,paginationDataLoaded:!0})}))},e.setPage=function(t){t<=0?t=1:t>e.state.total_pages&&(t=e.state.total_pages),e.setState({page:t})},e.addMovieToWillWatch=function(t){if(!e.state.moviesWillWatch.find((function(e){return e.id===t.id}))){var a=[].concat(Object(l.a)(e.state.moviesWillWatch),[t]);e.setState({moviesWillWatch:a})}},e.removeMovieFromWillWatch=function(t){var a=e.state.moviesWillWatch.filter((function(e){return e.id!==t.id}));e.setState({moviesWillWatch:a})},e.removeMovie=function(t){var a=e.state.movies.filter((function(e){return e.id!==t.id}));e.setState({movies:a})},e.updateSortBy=function(t){e.setState({sort_by:t})},e.state={movies:[],moviesWillWatch:[],sort_by:"popularity.desc",page:1,total_pages:1,paginationDataLoaded:!1},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getMovies()}},{key:"componentDidUpdate",value:function(e,t){t.sort_by===this.state.sort_by&&t.page===this.state.page||this.getMovies()}},{key:"render",value:function(){var e=this;return Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-9",children:Object(s.jsxs)("div",{className:"row",children:[this.state.paginationDataLoaded?Object(s.jsx)(b,{page:this.state.page,total_pages:this.state.total_pages,setPage:this.setPage}):Object(s.jsx)("p",{}),Object(s.jsx)("div",{className:"col-12 mb-3",children:Object(s.jsx)(m,{sort_by:this.state.sort_by,updateSortBy:this.updateSortBy})}),Object(s.jsx)("div",{className:"row",children:this.state.movies.map((function(t){return Object(s.jsx)("div",{className:"col-6 mb-3",children:Object(s.jsx)(j,{movie:t,removeMovie:e.removeMovie,addMovieToWillWatch:e.addMovieToWillWatch,removeMovieFromWillWatch:e.removeMovieFromWillWatch})},t.id)}))})]})}),Object(s.jsxs)("div",{className:"col-3",children:[Object(s.jsxs)("h4",{children:["Will Watch: ",this.state.moviesWillWatch.length]}),Object(s.jsx)("ul",{className:"list-group",children:this.state.moviesWillWatch.map((function(e){return Object(s.jsx)("li",{className:"list-group-item",children:Object(s.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(s.jsx)("span",{children:e.title}),Object(s.jsx)("span",{children:e.vote_average})]})},e.id)}))})]})]})})}}]),a}(n.a.Component),f=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,s=t.getFID,i=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),s(e),i(e),n(e),c(e)}))};o.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(g,{})}),document.getElementById("root")),f()}},[[16,1,2]]]);
//# sourceMappingURL=main.a79f5a85.chunk.js.map